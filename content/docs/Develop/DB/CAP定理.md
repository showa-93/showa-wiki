---
title: CAP定理
type: docs
author: showa
lastmod: 2023-10-08T14:44:51+09:00
waight: 1
---

ノード間のデータ複製において、同時に次の3つの保証を提供することはできない。

## 一貫性 (Consistency)

すべてのデータ読み込みにおいて、最新の書き込みデータもしくはエラーのどちらかを受け取る。

## 可用性 (Availability)

ノード障害により生存ノードの機能性は損なわれない。つまり、ダウンしていないノードが常に応答を返す。単一障害点が存在しないことが必要。

## 分断耐性 (Partition-tolerance)

システムは任意の通信障害などによるメッセージ損失に対し、継続して動作を行う。通信可能なサーバーが複数のグループに分断されるケース（ネットワーク分断）を指し、1つのハブに全てのサーバーがつながっている場合は、これは発生しない。ただし、そのようなネットワーク設計は単一障害点をもつことになり、可用性が成立しない。RDBではそもそもデータベースを分割しないので、このような障害とは無縁である。

この定理によると、分散システムはこの3つの保証のうち、同時に2つの保証を満たすことはできるが、同時に全てを満たすことはできない。単一障害点があれば、ネットワーク分断が発生した際にシステムがバラバラに分裂しても、そこを基準に一貫した応答ができる(分断耐性+一貫性)が、可用性が成立しなくなる。

- [CAP定理 Wikipadia](https://ja.wikipedia.org/wiki/CAP%E5%AE%9A%E7%90%86)
