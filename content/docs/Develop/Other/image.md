---
title: 画像処理
type: docs
author: showa
lastmod: 2023-11-23T23:49:45+09:00
waight: 1
---

## 画像フォーマット

### BMP

Microsoft Windows Bitmap Image  
マイクロソフトとIBMがWindowsとOS/2にわかれる前のOSを共同で開発していた頃に作られた画像ファイル形式。圧縮の方法についても定義されているが、Windowsが標準では無圧縮のファイルを生成するため、他のアプリケーションにおいても無指定時は、圧縮はされていない場合が多い。  

[Windows bitmap - Wikipedia](https://ja.wikipedia.org/wiki/Windows_bitmap)  

### GIF

Graphics Interchange Format  
ジフ。  
Graphics Interchange Format（グラフィックス・インターチェンジ・フォーマット、略称GIF、ジフ）とはCompuServeのPICSフォーラムで提唱された画像ファイルフォーマットの一つ。LZW特許を使用した画像圧縮が可能。  
GIFは256色以下の画像を扱うことができる可逆圧縮形式のファイルフォーマットである。圧縮形式の特性上、同一色が連続する画像の圧縮率が高くなるため、イラストやボタン画像など、使用色数の少ない画像への使用に適している。  

[Graphics Interchange Format - Wikipedia](https://ja.wikipedia.org/wiki/Graphics_Interchange_Format)  

### PNG

Portable Network Graphics  
ビットマップ画像を扱うファイルフォーマットである。圧縮アルゴリズムとしてDeflateを採用している、圧縮による画質の劣化のない可逆圧縮の画像ファイルフォーマットである。  
画像の色モデルとして、最大16ビットのグレースケール、24ビットと 48ビットのRGB、または8ビットまでのインデックスカラーモード を利用することができる。透過についてはクロマキーによる透過指定、および8ビットから16ビットのアルファチャンネルをサポートする。また、画像に付属するテキストなどのメタデータやガンマ値なども画像ごとに記録できる。  

[Portable Network Graphics - Wikipedia](https://ja.wikipedia.org/wiki/Portable_Network_Graphics)  

### JPEG

Joint Photographic Experts Group  
一般的に非可逆圧縮の画像フォーマットとして知られている。可逆圧縮形式もサポートしているが、可逆圧縮は特許などの関係でほとんど利用されていない。  
標準では、特定の種類の画像の正式なフォーマットがなく、JFIF形式（マジックナンバー上は、6バイト目から始まる形式部分にJFIFと記されているもの）が事実上の標準ファイルフォーマットとなっている。  

[JPEG - Wikipedia](https://ja.wikipedia.org/wiki/JPEG)  

### TIFF

Tagged Image File Format  
ビットマップ画像の符号化形式の一種である。タグと呼ばれる識別子を使うことによって、様々な形式のビットマップ画像を柔軟に表現できる。  
画像データを、解像度や色数、符号化方式が異なるものでも様々な形式で一つのファイルにまとめて格納できるため、アプリケーションソフトに依存することがあまり無いフォーマットであると言える。  

[Tagged Image File Format - Wikipedia](https://ja.wikipedia.org/wiki/Tagged_Image_File_Format)  

### SVG

Scalable Vector Graphics  
XMLベースの、2次元ベクターイメージ用の画像形式の1つである。アニメーションやユーザインタラクションもサポートしている。SVGの仕様はW3Cによって開発され、オープン標準として勧告されている。  
SVG は、拡張の自由度が高い XMLで記述されており、XML ならではの各種機能を定義した要素を持つ。SVG ではそれ自身に回転・拡大・移動などの表現を定義しているため、単体で多様な表現をすることが可能である。  

[Scalable Vector Graphics - Wikipedia](https://ja.wikipedia.org/wiki/Scalable_Vector_Graphics)  

## 画像処理

### Bit Block Transfer(BitBit)

合成元の画像に合成したい画像を特定の座標に転送すること。  
特定の色を転送しない手法をカラーキー転送とよぶ。  

### アンチエイリアシング処理

線をひいてピクセル化したときにみためがジャギーになることをエイリアスと呼ぶ。  
半透明色などでジャギーを改善する手法をアンチエイリアスという。  

- スーパーサンプリング

[アンチエイリアスとは？厳選6手法をご紹介します - SeleQt【セレキュト】｜SeleQt【セレキュト】](https://www.seleqt.net/topic/what-is-anti-aliasing-different-types/)  

### 画像の拡大/縮小

画像の拡大率に合わせて元の画像からサンプリングすることで画像の拡大・縮小をおこなう。  
このサンプリング方法によって、画像の品質や処理性能などがきまる。  

- ミップマップ
  - 予め解像度を落とした画像を用意しておくことで縮小時の計算処理量を削減する
  - 縮小後の画像の品質がオリジナルからの縮小より低くなる
  - 縦横比の異なるリップマップを用意することで画像の品質低下を抑えることもできる
- 二アレストネイバー
  - 一番近いピクセルを選択するサンプリング手法
- バイリニア補間
  - 最近傍の4pxを参照してピクセル色を計算するサンプリング手法
- バイキュービック補間
  - 周囲16近傍のピクセルを参照したサンプリング手法
  - 重み付けをしてピクセル色を計算する

### カラーフィルタ

#### レベル補正

RGBのヒストグラムの偏りを補正する処理。  
ヒストグラムが偏りのない分布になるようにマッピングする。  

#### ガンマ補正

中間色を中心に全体的に明るく（暗く）補正するフィルタ。  
ガンマ補正に用いるパラメータをガンマ値と呼ぶ。  

### モザイクフィルタ

特定の範囲ごとに平均色をもとめてその範囲を平均色のピクセルにすることでモザイクをかけることができる。  
透明度付きの画像の場合、透明度を考慮しないと暗く滲んだようになるため注意。  

### ぼかしフィルタ

モザイクフィルタとことなり、すべてのピクセルに平均処理が必要だが。縦方向と横方向それぞれ計算することで計算負荷を下げられる。  

- ガウスぼかし
  - ガウス分布を使ったぼかし処理で、中心を最大とした重み付けをしてぼかしの計算をおこなう。自然なぼかしになる。

## 用語

### 解像度とDPI

dpi = 1 inch あたりのピクセル数。1 inch = 2.54cm  
物理的なサイズを考える場合、DPIが必須。  

### インデックスカラー

パレットを参照するピクセル形式の総称。パレットの値をインデックスで指定するため。  

### ハイダイナミックレンジ(HDR)

写真では一番明るい場所を(255,255,255)としているため、明るさのレンジが広いものを表現しようとすると暗い部分が段階的に表現できなくなる。(逆光など)  
精度の低下が起こらないように255以上の情報を含ませることができるフォーマット。  
データ上でしか扱えないため、画面上に表示するためにトーンマッピングをすることで通常のRGBに収まるように圧縮する。  

### マルチスペクトル

RGBのかわりに光の周波数をいくつかのバンドにわけて表現する方法。  

### YCbCr

MPEGなど動画データで使われる形式。Y=輝度、Cb=青色差、Cr=赤色差で表現する。  
人間が色差について鈍感であることを利用するとCbCrを間引くことができ、データを圧縮することができる。  

## 参考

- [Amazon.co.jp: 2Dグラフィックスのしくみ ――図解でよくわかる画像処理技術のセオリー (WEB+DB PRESS plus) : FireAlpaca開発チーム: 本](https://www.amazon.co.jp/2D%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%81%97%E3%81%8F%E3%81%BF-%E2%80%95%E2%80%95%E5%9B%B3%E8%A7%A3%E3%81%A7%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8B%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E3%81%AE%E3%82%BB%E3%82%AA%E3%83%AA%E3%83%BC-WEB-PRESS-plus/dp/4774175587)
